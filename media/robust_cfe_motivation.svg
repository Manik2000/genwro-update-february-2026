<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 900 670" xmlns="http://www.w3.org/2000/svg">
  <style>
    @keyframes dashMove {
      to { stroke-dashoffset: -20; }
    }
    @keyframes pulseGlow {
      0%, 100% { opacity: 0.6; }
      50% { opacity: 1; }
    }
    @keyframes arrowPulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }

    .decision-boundary {
      animation: dashMove 1.2s linear infinite;
    }
    .robust-region {
      animation: dashMove 1.8s linear infinite reverse;
    }
    .x-prime-glow {
      animation: pulseGlow 2.5s ease-in-out infinite;
    }
    .robust-label {
      animation: arrowPulse 2s ease-in-out infinite;
    }
  </style>

  <defs>
    <radialGradient id="class0Grad" cx="50%" cy="50%" r="60%">
      <stop offset="0%" stop-color="#3b82f6" stop-opacity="0.18"/>
      <stop offset="100%" stop-color="#3b82f6" stop-opacity="0.03"/>
    </radialGradient>
    <radialGradient id="class1Grad" cx="50%" cy="50%" r="60%">
      <stop offset="0%" stop-color="#f97316" stop-opacity="0.15"/>
      <stop offset="100%" stop-color="#f97316" stop-opacity="0.03"/>
    </radialGradient>
    <!-- Glow for original (dark blue) -->
    <radialGradient id="xOrigGlow" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#1d4ed8" stop-opacity="0.4"/>
      <stop offset="60%" stop-color="#1d4ed8" stop-opacity="0.08"/>
      <stop offset="100%" stop-color="#1d4ed8" stop-opacity="0"/>
    </radialGradient>
    <!-- Glow for non-robust counterfactual (dark orange) -->
    <radialGradient id="xNonRobustGlow" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#ea580c" stop-opacity="0.3"/>
      <stop offset="60%" stop-color="#ea580c" stop-opacity="0.06"/>
      <stop offset="100%" stop-color="#ea580c" stop-opacity="0"/>
    </radialGradient>
    <!-- Glow for robust counterfactual (dark orange) -->
    <radialGradient id="xRobustGlow" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#ea580c" stop-opacity="0.45"/>
      <stop offset="60%" stop-color="#ea580c" stop-opacity="0.1"/>
      <stop offset="100%" stop-color="#ea580c" stop-opacity="0"/>
    </radialGradient>

    <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto" markerUnits="strokeWidth">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ea580c" opacity="0.9"/>
    </marker>
    <marker id="arrowGray" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto" markerUnits="strokeWidth">
      <polygon points="0 0, 8 3, 0 6" fill="#888888" opacity="0.7"/>
    </marker>

    <filter id="softGlow">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="900" height="670" fill="#fafafa"/>

  <!-- Class 1 region (bottom-left) -->
  <ellipse cx="250" cy="520" rx="250" ry="180" fill="url(#class0Grad)"/>
  <!-- Class 2 region (top-right) -->
  <ellipse cx="650" cy="200" rx="220" ry="200" fill="url(#class1Grad)"/>

  <!-- Decision Boundary (diagonal dashed line) -->
  <line x1="160" y1="120" x2="720" y2="620"
    stroke="#8890b0" stroke-width="2.5"
    stroke-dasharray="12 8"
    class="decision-boundary" opacity="0.8"/>

  <!-- Decision boundary label -->
  <text x="130" y="108" fill="#8890b0" font-family="monospace" font-size="12" font-weight="500" letter-spacing="0.08em">
    DECISION BOUNDARY
  </text>

  <!-- Robust region (shifted dashed boundary) -->
  <line x1="280" y1="90" x2="820" y2="570"
    stroke="#10b981" stroke-width="2"
    stroke-dasharray="10 10"
    class="robust-region" opacity="0.5"/>

  <!-- Class 1 data points (bottom-left cluster) -->
  <g opacity="0.7">
    <circle cx="120" cy="520" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="155" cy="555" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="100" cy="580" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="180" cy="600" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="220" cy="620" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="140" cy="610" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="200" cy="570" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="250" cy="590" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="170" cy="500" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="80" cy="550" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="230" cy="540" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="270" cy="510" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="130" cy="480" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="190" cy="460" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="310" cy="490" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="280" cy="560" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="90" cy="490" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="320" cy="540" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="240" cy="470" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="350" cy="460" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="160" cy="640" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="300" cy="580" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="210" cy="650" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
    <circle cx="260" cy="640" r="5" fill="none" stroke="#3b82f6" stroke-width="1.8"/>
  </g>

  <!-- Class 2 data points (top-right cluster) -->
  <g opacity="0.7">
    <circle cx="620" cy="160" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="660" cy="190" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="590" cy="210" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="700" cy="150" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="640" cy="130" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="710" cy="200" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="680" cy="240" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="730" cy="170" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="650" cy="270" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="750" cy="220" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="580" cy="260" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="720" cy="280" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="670" cy="310" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="760" cy="260" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
    <circle cx="610" cy="300" r="5" fill="none" stroke="#f97316" stroke-width="1.8"/>
  </g>

  <!-- Original instance x (in blue cluster, dark blue) -->
  <circle cx="280" cy="480" r="22" fill="url(#xOrigGlow)" class="x-prime-glow"/>
  <circle cx="280" cy="480" r="8" fill="#1d4ed8" opacity="0.9" filter="url(#softGlow)"/>
  <text x="268" y="516" fill="#1e3a8a" font-family="monospace" font-size="16" font-weight="600">x</text>

  <!-- Arrow from x to non-robust x' -->
  <line x1="294" y1="470" x2="448" y2="330"
    stroke="#888888" stroke-width="1.8"
    marker-end="url(#arrowGray)" opacity="0.6"/>

  <!-- Non-robust counterfactual x' (between the two boundaries, dark orange) -->
  <circle cx="460" cy="320" r="18" fill="url(#xNonRobustGlow)"/>
  <circle cx="460" cy="320" r="7" fill="#ea580c" opacity="0.85" filter="url(#softGlow)"/>
  <text x="475" y="318" fill="#c2410c" font-family="monospace" font-size="14" font-weight="500">x'</text>
  <text x="473" y="336" fill="#999999" font-family="sans-serif" font-size="10" font-style="italic" opacity="0.7">non-robust</text>

  <!-- Arrow from x to robust x' -->
  <line x1="296" y1="468" x2="588" y2="248"
    stroke="#ea580c" stroke-width="2"
    marker-end="url(#arrowOrange)" opacity="0.85"/>

  <!-- Robust counterfactual x'_robust (past robust boundary, dark orange) -->
  <circle cx="600" cy="240" r="24" fill="url(#xRobustGlow)" class="x-prime-glow"/>
  <circle cx="600" cy="240" r="8" fill="#ea580c" opacity="0.95" filter="url(#softGlow)"/>
  <text x="616" y="236" fill="#c2410c" font-family="monospace" font-size="15" font-weight="600">x'</text>
  <text x="616" y="254" fill="#c2410c" font-family="monospace" font-size="10" font-weight="600">robust</text>


  <!-- Class labels -->
  <g>
    <rect x="60" y="370" rx="20" ry="20" width="130" height="44" fill="none" stroke="#3b82f6" stroke-width="1.8" opacity="0.7"/>
    <text x="125" y="398" text-anchor="middle" fill="#3b82f6" font-family="sans-serif" font-size="17" font-weight="500" opacity="0.9">
      Class 1
    </text>
  </g>
  <g>
    <rect x="540" y="72" rx="22" ry="22" width="140" height="48" fill="none" stroke="#f97316" stroke-width="1.8" opacity="0.7"/>
    <text x="610" y="103" text-anchor="middle" fill="#f97316" font-family="sans-serif" font-size="17" font-weight="500" opacity="0.9">
      Class 2
    </text>
  </g>

  <!-- Arrow from Class 1 label toward Class 2 -->
  <path d="M 170 375 Q 300 180 540 96"
    fill="none" stroke="#aaaaaa" stroke-width="1.2"
    stroke-dasharray="5 5" opacity="0.35"
    marker-end="url(#arrowGray)"/>

  <!-- Legend -->
  <g transform="translate(30, 30)">
    <rect x="0" y="0" rx="8" ry="8" width="270" height="120" fill="#f5f5f5" stroke="#e0e0e0" stroke-width="1"/>
    <circle cx="24" cy="28" r="5" fill="#1d4ed8" opacity="0.9"/>
    <text x="40" y="33" fill="#444444" font-family="sans-serif" font-size="12">Original instance (x)</text>

    <circle cx="24" cy="55" r="5" fill="#ea580c" opacity="0.9"/>
    <text x="40" y="60" fill="#444444" font-family="sans-serif" font-size="12">Counterfactual (x')</text>

    <line x1="16" y1="80" x2="32" y2="80" stroke="#8890b0" stroke-width="2" stroke-dasharray="6 4"/>
    <text x="40" y="85" fill="#444444" font-family="sans-serif" font-size="12">Decision boundary</text>

    <line x1="16" y1="105" x2="32" y2="105" stroke="#10b981" stroke-width="1.5" stroke-dasharray="5 5" opacity="0.7"/>
    <text x="40" y="110" fill="#444444" font-family="sans-serif" font-size="12">Shifted boundary</text>
  </g>

</svg>
